{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixebay-api.js","../src/main.js"],"sourcesContent":["import { getData, searchImageForm } from './pixebay-api.js';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const gallery = document.querySelector('.gallery');\nexport const loadMoreButton = document.createElement('button');\nloadMoreButton.classList.add('loadButton');\nloadMoreButton.textContent = 'Load More';\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\nexport function getPhotos(photos) {\n  let imageBox = '';\n  const oldList = document.querySelectorAll('.image');\n  const oldImageCount = oldList.length;\n\n  photos.forEach(image => {\n    imageBox += `\n      <li class=\"image\">\n        <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"gallery-image\" width=\"360\" height=\"200\">\n          <div class=\"imageStats\">\n          <p><span>Likes</span>${image.likes}</p>\n          <p><span>Views</span> ${image.views}</p>\n          <p><span>Comments</span> ${image.comments}</p>\n          <p><span>Downloads</span> ${image.downloads}</p>\n          </div>\n          </a>\n      </li>\n    `;\n  });\n\n  gallery.innerHTML += imageBox;\n  lightbox.refresh();\n  loadMoreButton.style.display = 'block';\n  document.body.append(loadMoreButton);\n\n  const newList = document.querySelectorAll('.image');\n  const newFirstImage = newList[oldImageCount];\n\n  if (newList.length > 15) {\n    const rect = newFirstImage.getBoundingClientRect();\n    window.scrollBy({\n      top: rect.top - 20,\n      behavior: 'smooth'\n    });\n  }\n\n}\n","import axios from 'axios';\nimport { getPhotos, gallery, loadMoreButton } from './render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport const searchImageForm = document.querySelector('.searchPhoto');\nconst loader = document.createElement('span');\nloader.classList.add('loader');\n\nexport async function getData(event) {\n  try {\n    let userSearching = searchImageForm.inputText.value.trim();\n    let newUserSearching = '';\n    let page = 1;\n    let totalImages = 15;\n\n    if (newUserSearching != userSearching) {\n      newUserSearching = userSearching;\n      gallery.innerHTML = '';\n      loadMoreButton.style.display = 'none';\n    }\n\n    if (!userSearching) {\n      iziToast.error({\n        color: '#EF4040',\n        message: 'Error, input field is empty',\n        messageColor: '#FAFAFB',\n        maxWidth: '432',\n        iconColor: '#FAFAFB',\n      });\n      return;\n    }\n\n    document.body.append(loader);\n\n    const response = await axios.get(\n      `https://pixabay.com/api/?key=48639504-554e542bc8495b3a6c3499497&q=${newUserSearching}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=15`\n    );\n\n    document.body.removeChild(loader);\n\n    if (response.data.hits.length === 0) {\n      iziToast.error({\n        color: '#EF4040',\n        message:\n          'Sorry, there are no images matching your search query. Please, try again!',\n        messageColor: '#FAFAFB',\n        maxWidth: '432',\n        iconColor: '#FAFAFB',\n      });\n\n      return;\n    }\n    getPhotos(response.data.hits);\n\n    loadMoreButton.addEventListener('click', async () => {\n      try {\n        page += 1;\n        totalImages += 15;\n        document.body.append(loader);\n        const response = await axios.get(\n          `https://pixabay.com/api/?key=48639504-554e542bc8495b3a6c3499497&q=${newUserSearching}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=15`\n        );\n        document.body.removeChild(loader);\n        console.log(response);\n        getPhotos(response.data.hits);\n\n        if (response.data.totalHits <= totalImages) {\n          loadMoreButton.style.display = 'none';\n          iziToast.info({\n            message: `We're sorry, but you've reached the end of search results.`,\n          });\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    });\n  } catch (error) {\n    console.log(error);\n  }\n}\n","import { getData, searchImageForm } from './js/pixebay-api'\n\n\nsearchImageForm.addEventListener(\"submit\", event => {\n    event.preventDefault();\n    getData(event);\n});\n\n"],"names":["gallery","loadMoreButton","lightbox","SimpleLightbox","getPhotos","photos","imageBox","oldImageCount","image","newList","newFirstImage","rect","searchImageForm","loader","getData","event","userSearching","newUserSearching","page","totalImages","iziToast","response","axios","error"],"mappings":"owBAIO,MAAMA,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAiB,SAAS,cAAc,QAAQ,EAC7DA,EAAe,UAAU,IAAI,YAAY,EACzCA,EAAe,YAAc,YAE7B,IAAIC,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GAChB,CAAC,EACM,SAASC,EAAUC,EAAQ,CAChC,IAAIC,EAAW,GAEf,MAAMC,EADU,SAAS,iBAAiB,QAAQ,EACpB,OAE9BF,EAAO,QAAQG,GAAS,CACtBF,GAAY;AAAA;AAAA,wCAEwBE,EAAM,aAAa;AAAA,sBACrCA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,iCAE3BA,EAAM,KAAK;AAAA,kCACVA,EAAM,KAAK;AAAA,qCACRA,EAAM,QAAQ;AAAA,sCACbA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,KAKrD,CAAG,EAEDR,EAAQ,WAAaM,EACrBJ,EAAS,QAAO,EAChBD,EAAe,MAAM,QAAU,QAC/B,SAAS,KAAK,OAAOA,CAAc,EAEnC,MAAMQ,EAAU,SAAS,iBAAiB,QAAQ,EAC5CC,EAAgBD,EAAQF,CAAa,EAE3C,GAAIE,EAAQ,OAAS,GAAI,CACvB,MAAME,EAAOD,EAAc,wBAC3B,OAAO,SAAS,CACd,IAAKC,EAAK,IAAM,GAChB,SAAU,QAChB,CAAK,CACF,CAEH,CC7CO,MAAMC,EAAkB,SAAS,cAAc,cAAc,EAC9DC,EAAS,SAAS,cAAc,MAAM,EAC5CA,EAAO,UAAU,IAAI,QAAQ,EAEtB,eAAeC,EAAQC,EAAO,CACnC,GAAI,CACF,IAAIC,EAAgBJ,EAAgB,UAAU,MAAM,KAAI,EACpDK,EAAmB,GACnBC,EAAO,EACPC,EAAc,GAQlB,GANIF,GAAoBD,IACtBC,EAAmBD,EACnBhB,EAAQ,UAAY,GACpBC,EAAe,MAAM,QAAU,QAG7B,CAACe,EAAe,CAClBI,EAAS,MAAM,CACb,MAAO,UACP,QAAS,8BACT,aAAc,UACd,SAAU,MACV,UAAW,SACnB,CAAO,EACD,MACD,CAED,SAAS,KAAK,OAAOP,CAAM,EAE3B,MAAMQ,EAAW,MAAMC,EAAM,IAC3B,qEAAqEL,CAAgB,iEAAiEC,CAAI,cAChK,EAII,GAFA,SAAS,KAAK,YAAYL,CAAM,EAE5BQ,EAAS,KAAK,KAAK,SAAW,EAAG,CACnCD,EAAS,MAAM,CACb,MAAO,UACP,QACE,4EACF,aAAc,UACd,SAAU,MACV,UAAW,SACnB,CAAO,EAED,MACD,CACDhB,EAAUiB,EAAS,KAAK,IAAI,EAE5BpB,EAAe,iBAAiB,QAAS,SAAY,CACnD,GAAI,CACFiB,GAAQ,EACRC,GAAe,GACf,SAAS,KAAK,OAAON,CAAM,EAC3B,MAAMQ,EAAW,MAAMC,EAAM,IAC3B,qEAAqEL,CAAgB,iEAAiEC,CAAI,cACpK,EACQ,SAAS,KAAK,YAAYL,CAAM,EAChC,QAAQ,IAAIQ,CAAQ,EACpBjB,EAAUiB,EAAS,KAAK,IAAI,EAExBA,EAAS,KAAK,WAAaF,IAC7BlB,EAAe,MAAM,QAAU,OAC/BmB,EAAS,KAAK,CACZ,QAAS,4DACrB,CAAW,EAEJ,OAAQG,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACP,CAAK,CACF,OAAQA,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH,CC7EAX,EAAgB,iBAAiB,SAAUG,GAAS,CAChDA,EAAM,eAAc,EACpBD,EAAa,CACjB,CAAC"}