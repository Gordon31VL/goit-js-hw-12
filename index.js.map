{"version":3,"file":"index.js","sources":["../src/js/pixebay-api.js","../src/main.js","../src/js/render-functions.js"],"sourcesContent":["import axios from 'axios';\n\n\nexport async function getData(userSearching, page) {\n  try {\n    const response = await axios.get(\n      `https://pixabay.com/api/?key=48639504-554e542bc8495b3a6c3499497&q=${userSearching}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=15`\n    );\n    return response.data\n  } catch (error) {\n    console.log(error);\n  }\n}\n","import { getData } from './js/pixebay-api';\nimport { getPhotos } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const gallery = document.querySelector('.gallery');\nexport const loadMoreButton = document.createElement('button');\nconst loader = document.createElement('span');\nloadMoreButton.classList.add('loadButton');\nloadMoreButton.textContent = 'Load More';\nloader.classList.add('loader');\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport const searchImageForm = document.querySelector('.searchPhoto');\nlet page = 1;\nlet newUserSearching = '';\n\nsearchImageForm.addEventListener('submit', async event => {\n  event.preventDefault();\n  document.body.append(loader);\n\n  try {\n    gallery.innerHTML = '';\n\n    if (document.body.contains(loadMoreButton)) {\n      document.body.removeChild(loadMoreButton);\n    }\n\n    searchImageForm.inputText.value = searchImageForm.inputText.value.trim();\n    let userSearching = searchImageForm.inputText.value;\n\n    if (newUserSearching != userSearching) {\n      newUserSearching = userSearching;\n      page = 1;\n    }\n\n    const responseData = await getData(newUserSearching, page);\n\n    if (!userSearching) {\n      iziToast.error({\n        color: '#EF4040',\n        message: 'Error, input field is empty',\n        messageColor: '#FAFAFB',\n        maxWidth: '432',\n        iconColor: '#FAFAFB',\n      });\n      return;\n    }\n\n    if (responseData.hits.length === 0) {\n      iziToast.error({\n        color: '#EF4040',\n        message:\n          'Sorry, there are no images matching your search query. Please, try again!',\n        messageColor: '#FAFAFB',\n        maxWidth: '432',\n        iconColor: '#FAFAFB',\n      });\n\n      return;\n    }\n\n    getPhotos(responseData.hits);\n    document.body.append(loadMoreButton);\n  } catch (error) {\n    console.error(error);\n  } finally {\n    document.body.removeChild(loader);\n    lightbox.refresh();\n  }\n});\n\nloadMoreButton.addEventListener('click', async event => {\n  document.body.append(loader);\n  document.body.removeChild(loadMoreButton);\n\n  try {\n    page++;\n    const responseData = await getData(newUserSearching, page);\n    const oldImageCount = gallery.children.length;\n\n    getPhotos(responseData.hits);\n\n    if (responseData.totalHits <= gallery.children.length) {\n      iziToast.info({\n        message: `We're sorry, but you've reached the end of search results.`,\n      });\n\n      return;\n    }\n    const newList = document.querySelectorAll('.image');\n    const newFirstImage = newList[oldImageCount];\n    const rect = newFirstImage.getBoundingClientRect();\n    window.scrollBy({\n      top: rect.top - 20,\n      behavior: 'smooth',\n    }); \n\n    document.body.append(loadMoreButton);\n  } catch (error) {\n    console.error(error);\n  } finally {\n    document.body.removeChild(loader);\n    lightbox.refresh();\n  }\n});\n","import { gallery } from \"../main\";\n\nexport function getPhotos(photos) {\n  let imageBox = '';\n\n  photos.forEach(image => {\n    imageBox += `\n      <li class=\"image\">\n        <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"gallery-image\" width=\"360\" height=\"200\">\n          <div class=\"imageStats\">\n          <p><span>Likes</span>${image.likes}</p>\n          <p><span>Views</span> ${image.views}</p>\n          <p><span>Comments</span> ${image.comments}</p>\n          <p><span>Downloads</span> ${image.downloads}</p>\n          </div>\n          </a>\n      </li>\n    `;\n  });\n\n  gallery.insertAdjacentHTML('beforeend', imageBox);\n}\n"],"names":["getData","userSearching","page","axios","error","gallery","loadMoreButton","loader","lightbox","SimpleLightbox","searchImageForm","newUserSearching","event","responseData","iziToast","getPhotos","oldImageCount","rect","photos","imageBox","image"],"mappings":"owBAGO,eAAeA,EAAQC,EAAeC,EAAM,CACjD,GAAI,CAIF,OAHiB,MAAMC,EAAM,IAC3B,qEAAqEF,CAAa,iEAAiEC,CAAI,cAC7J,GACoB,IACjB,OAAQE,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH,CCLO,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAiB,SAAS,cAAc,QAAQ,EACvDC,EAAS,SAAS,cAAc,MAAM,EAC5CD,EAAe,UAAU,IAAI,YAAY,EACzCA,EAAe,YAAc,YAC7BC,EAAO,UAAU,IAAI,QAAQ,EAE7B,IAAIC,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GAChB,CAAC,EAEM,MAAMC,EAAkB,SAAS,cAAc,cAAc,EACpE,IAAIR,EAAO,EACPS,EAAmB,GAEvBD,EAAgB,iBAAiB,SAAU,MAAME,GAAS,CACxDA,EAAM,eAAc,EACpB,SAAS,KAAK,OAAOL,CAAM,EAE3B,GAAI,CACFF,EAAQ,UAAY,GAEhB,SAAS,KAAK,SAASC,CAAc,GACvC,SAAS,KAAK,YAAYA,CAAc,EAG1CI,EAAgB,UAAU,MAAQA,EAAgB,UAAU,MAAM,OAClE,IAAIT,EAAgBS,EAAgB,UAAU,MAE1CC,GAAoBV,IACtBU,EAAmBV,EACnBC,EAAO,GAGT,MAAMW,EAAe,MAAMb,EAAQW,EAAkBT,CAAI,EAEzD,GAAI,CAACD,EAAe,CAClBa,EAAS,MAAM,CACb,MAAO,UACP,QAAS,8BACT,aAAc,UACd,SAAU,MACV,UAAW,SACnB,CAAO,EACD,MACD,CAED,GAAID,EAAa,KAAK,SAAW,EAAG,CAClCC,EAAS,MAAM,CACb,MAAO,UACP,QACE,4EACF,aAAc,UACd,SAAU,MACV,UAAW,SACnB,CAAO,EAED,MACD,CAEDC,EAAUF,EAAa,IAAI,EAC3B,SAAS,KAAK,OAAOP,CAAc,CACpC,OAAQF,EAAO,CACd,QAAQ,MAAMA,CAAK,CACvB,QAAY,CACR,SAAS,KAAK,YAAYG,CAAM,EAChCC,EAAS,QAAO,CACjB,CACH,CAAC,EAEDF,EAAe,iBAAiB,QAAS,MAAMM,GAAS,CACtD,SAAS,KAAK,OAAOL,CAAM,EAC3B,SAAS,KAAK,YAAYD,CAAc,EAExC,GAAI,CACFJ,IACA,MAAMW,EAAe,MAAMb,EAAQW,EAAkBT,CAAI,EACnDc,EAAgBX,EAAQ,SAAS,OAIvC,GAFAU,EAAUF,EAAa,IAAI,EAEvBA,EAAa,WAAaR,EAAQ,SAAS,OAAQ,CACrDS,EAAS,KAAK,CACZ,QAAS,4DACjB,CAAO,EAED,MACD,CAGD,MAAMG,EAFU,SAAS,iBAAiB,QAAQ,EACpBD,CAAa,EAChB,wBAC3B,OAAO,SAAS,CACd,IAAKC,EAAK,IAAM,GAChB,SAAU,QAChB,CAAK,EAED,SAAS,KAAK,OAAOX,CAAc,CACpC,OAAQF,EAAO,CACd,QAAQ,MAAMA,CAAK,CACvB,QAAY,CACR,SAAS,KAAK,YAAYG,CAAM,EAChCC,EAAS,QAAO,CACjB,CACH,CAAC,EC7GM,SAASO,EAAUG,EAAQ,CAChC,IAAIC,EAAW,GAEfD,EAAO,QAAQE,GAAS,CACtBD,GAAY;AAAA;AAAA,wCAEwBC,EAAM,aAAa;AAAA,sBACrCA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,iCAE3BA,EAAM,KAAK;AAAA,kCACVA,EAAM,KAAK;AAAA,qCACRA,EAAM,QAAQ;AAAA,sCACbA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,KAKrD,CAAG,EAEDf,EAAQ,mBAAmB,YAAac,CAAQ,CAClD"}